"use strict";(self.webpackChunkMobileApps=self.webpackChunkMobileApps||[]).push([[4634,7005,62],{44662:(e,a,n)=>{n.d(a,{A:()=>r});var t=n(65043),i=n(83003),s=n(79951),l=n(70579);const r=(0,i.Ng)((e=>{let{theme:a}=e;const{navType:n}=a;return{navType:n}}),{})((e=>{let{children:a,background:n,className:i,overlap:r,navType:c}=e;const[d,o]=(0,t.useState)(0),m=(0,t.useRef)(null);(0,t.useEffect)((()=>{if(c===s.HG){const e=window.innerWidth,a=m.current.offsetWidth;o((e-a)/2)}}),[c]);return(0,l.jsx)("div",{ref:m,className:"page-header-alt ".concat(i||""," ").concat(r&&"overlap"),style:(()=>{let e={backgroundImage:n?"url(".concat(n,")"):"none"};return c===s.HG&&(e.marginRight=-d,e.marginLeft=-d,e.paddingLeft=0,e.paddingRight=0),e})(),children:c===s.HG?(0,l.jsx)("div",{className:"container",children:a}):(0,l.jsx)(l.Fragment,{children:a})})}))},8572:(e,a,n)=>{n.d(a,{A:()=>s});n(65043);var t=n(70579);const i=e=>{const{children:a,className:n,alignItems:i,justifyContent:s,mobileFlex:l,flexDirection:r}=e;return(0,t.jsx)("div",{className:"".concat(l?"d-flex":"d-md-flex"," ").concat(n," ").concat(r?"flex-"+r:""," ").concat(i?"align-items-"+i:""," ").concat(s?"justify-content-"+s:""),children:a})};i.defaultProps={mobileFlex:!0,flexDirection:"row",className:""};const s=i},6706:(e,a,n)=>{n.d(a,{Y:()=>t});const t="https://backend.mobile-apps-dz.com/uploads/images/"},7005:(e,a,n)=>{n.r(a),n.d(a,{default:()=>s});n(65043);var t=n(43850),i=n(70579);const s=()=>(0,i.jsx)(t.A,{mode:"ADD"})},62:(e,a,n)=>{n.r(a),n.d(a,{default:()=>s});n(65043);var t=n(43850),i=n(70579);const s=()=>(0,i.jsx)(t.A,{mode:"EDIT"})},43850:(e,a,n)=>{n.d(a,{A:()=>R});var t=n(65043),i=n(44662),s=n(94406),l=n(50289),r=n(48193),c=n(64435),d=n(89421),o=n(8572),m=n(73216),u=n(83003),h=n(74117),p=n(44978),x=n(33307),g=n(33122),f=n(47419),A=n(11645),j=n(41264),v=n(94733);const b={title:[{required:!0,message:(0,p.t)("the company name is required")}],description:[{required:!0,message:(0,p.t)("the description is required")}],image:[{required:!0,message:(0,p.t)("the image is required")}],duration:[{required:!0,message:(0,p.t)("the duration is required")}],location:[{required:!0,message:(0,p.t)("the location is required")}]};var y=n(77977),C=n(58345),w=n.n(C),N=n(70579);const{Option:k}=s.A,{TextArea:E}=x.A,{Dragger:D}=g.A,I=e=>{const{mode:a}=e,{t:n}=(0,h.Bd)(),[i,r]=((0,u.wA)(),(0,t.useState)([])),[c,o]=(0,t.useState)(!1),m={onRemove:e=>{const a=i.indexOf(e),n=i.slice();n.splice(a,1),r(n)},beforeUpload:e=>(r([...i,e]),!1),fileList:i},[p,C]=(0,t.useState)(""),{ad:E}=(0,u.d4)((e=>e.ad));return(0,t.useEffect)((()=>{"EDIT"===a&&E&&C(E.description||"")}),[a,E]),(0,N.jsx)("div",{children:(0,N.jsx)(f.A,{gutter:16,align:"middle",children:(0,N.jsxs)(A.A,{xs:24,sm:24,md:24,children:[(0,N.jsx)(f.A,{gutter:16,children:(0,N.jsx)(A.A,{xs:24,sm:24,md:24,children:(0,N.jsx)(l.A.Item,{name:"title",label:n("Title"),rules:b.title,children:(0,N.jsx)(x.A,{})})})}),(0,N.jsx)(l.A.Item,{label:n("display"),name:"isShown",valuePropName:"checked",children:(0,N.jsx)(j.A,{defaultChecked:null===E||void 0===E?void 0:E.isShown})}),(0,N.jsx)(f.A,{gutter:16,children:(0,N.jsx)(A.A,{xs:24,sm:24,md:24,children:(0,N.jsx)(l.A.Item,{name:"location",label:n("Location"),rules:b.location,children:(0,N.jsxs)(s.A,{placeholder:n("Select a location"),children:[(0,N.jsx)(k,{value:"1",children:"1"}),(0,N.jsx)(k,{value:"2",children:"2"}),(0,N.jsx)(k,{value:"3",children:"3"}),(0,N.jsx)(k,{value:"4",children:"4"}),(0,N.jsx)(k,{value:"5",children:"5"})]})})})}),(0,N.jsx)(f.A,{gutter:16,children:(0,N.jsx)(A.A,{xs:24,sm:24,md:24,children:(0,N.jsx)(l.A.Item,{name:"duration",label:n("Duration"),rules:b.duration,children:(0,N.jsx)(x.A,{})})})}),(0,N.jsx)(l.A.Item,{label:n("image"),name:"image",rules:b.image,valuePropName:"fileList",getValueFromEvent:e=>e.fileList,children:(0,N.jsx)(g.A,{accept:"image/*",maxCount:1,listType:"picture",...m,className:"custom-upload",children:(0,N.jsx)(d.A,{icon:(0,N.jsx)(v.A,{}),children:n("Add an image")})})}),(0,N.jsx)(l.A.Item,{label:n("link"),name:"video",children:(0,N.jsx)(x.A,{})}),(0,N.jsx)(l.A.Item,{label:"Description",name:"description",children:(0,N.jsx)(y.CKEditor,{editor:w(),data:p,onChange:(a,n)=>{const t=n.getData();C(t),e.onEditorChange&&e.onEditorChange(t)},onReady:e=>{e.editing.view.change((a=>{a.setStyle("min-height","200px",e.editing.view.document.getRoot())}))},config:{language:"fr",direction:"ltr"}})})]})})})};var S=n(52771),O=n(6706);const{Option:F}=s.A,T="ADD",q="EDIT",R=e=>{const{mode:a=T}=e,n=(0,m.Zp)(),s=(0,u.wA)(),{t:p}=(0,h.Bd)(),[x]=l.A.useForm(),[g,f]=(0,t.useState)(""),[A,j]=(0,t.useState)(!1),[v,b]=(0,t.useState)(!1),{id:y}=(0,m.g)(),[C,w]=(0,t.useState)(null),{error:k,ad:E,loading:D}=(0,u.d4)((e=>e.ad));(0,t.useEffect)((()=>{a===q&&(console.log(y),s((0,S.CY)(y)).unwrap().catch((e=>{console.error("Error fetching ad:",e),r.Ay.error(p("Error fetching ad: ")+e.message)})))}),[s,a,y,p]),(0,t.useEffect)((()=>{if(a===q&&E){const e={...E};if(x.setFieldsValue(e),E.image){const e=[{uid:"-1",name:E.image[0].originalname,status:"done",url:"".concat(O.Y+E.image[0].filename)}];x.setFieldsValue({image:e})}}}),[x,a,E]);const[F,R]=(0,t.useState)("");return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)(l.A,{layout:"vertical",form:x,onFinish:async()=>{try{const e=await x.validateFields(),t=new FormData;t.append("title",e.title),t.append("isShown",e.isShown),t.append("description",F),t.append("location",e.location),t.append("duration",e.duration),e.image&&e.image[0]&&t.append("image",e.image[0].originFileObj),e.video&&e.video[0]&&t.append("video",e.video[0].originFileObj),a===T&&(await s((0,S.Yv)(t)).unwrap(),r.Ay.success(p("Ad added successfully!"),1),n(-1)),a===q&&(await s((0,S.hI)({id:E._id,data:t})).unwrap(),await r.Ay.success(p("Ad updated!"),1),n(-1))}catch(k){r.Ay.error(k)}finally{s((0,S.RZ)())}},name:"Nanny-form",className:"ant-advanced-search-form",initialValues:C,children:[(0,N.jsx)(i.A,{className:"border-bottom mb-4",children:(0,N.jsx)("div",{className:"container",children:(0,N.jsx)(o.A,{mobileFlex:!1,justifyContent:"between",alignItems:"center",children:(0,N.jsx)("div",{children:(0,N.jsx)("h2",{className:"mb-3",style:{display:"inline-block"},children:p("ADD"===a?"Add an ad":"Edit ad")})})})})}),(0,N.jsx)("div",{className:"container",children:(0,N.jsx)(I,{mode:a,onEditorChange:e=>{R(e)}})}),(0,N.jsx)(o.A,{justifyContent:"center",children:(0,N.jsxs)(c.A,{size:"middle",className:"mb-3",children:[(0,N.jsx)(d.A,{type:"primary",htmlType:"submit",children:p("ADD"===a?"Add an ad":"Edit ad")}),(0,N.jsx)(d.A,{className:"mr-2",onClick:()=>{n(-1)},children:p("cancel")})]})})]})})}},14634:(e,a,n)=>{n.r(a),n.d(a,{default:()=>r});n(65043);var t=n(73216),i=n(62),s=n(7005),l=n(70579);const r=()=>(0,l.jsxs)(t.BV,{children:[(0,l.jsx)(t.qh,{path:"*",element:(0,l.jsx)(t.C5,{to:"liste",replace:!0})}),(0,l.jsx)(t.qh,{path:"edit/:id",element:(0,l.jsx)(i.default,{})}),(0,l.jsx)(t.qh,{path:"ajouter",element:(0,l.jsx)(s.default,{})})]})},41264:(e,a,n)=>{n.d(a,{A:()=>b});var t=n(58168),i=n(64467),s=n(40164),l=n(98139),r=n.n(l),c=n(5544),d=n(53986),o=n(65043),m=n(28678),u=n(25001),h=o.forwardRef((function(e,a){var n,t=e.prefixCls,s=void 0===t?"rc-switch":t,l=e.className,h=e.checked,p=e.defaultChecked,x=e.disabled,g=e.loadingIcon,f=e.checkedChildren,A=e.unCheckedChildren,j=e.onClick,v=e.onChange,b=e.onKeyDown,y=(0,d.A)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),C=(0,m.A)(!1,{value:h,defaultValue:p}),w=(0,c.A)(C,2),N=w[0],k=w[1];function E(e,a){var n=N;return x||(k(n=e),null===v||void 0===v||v(n,a)),n}var D=r()(s,l,(n={},(0,i.A)(n,"".concat(s,"-checked"),N),(0,i.A)(n,"".concat(s,"-disabled"),x),n));return o.createElement("button",Object.assign({},y,{type:"button",role:"switch","aria-checked":N,disabled:x,className:D,ref:a,onKeyDown:function(e){e.which===u.A.LEFT?E(!1,e):e.which===u.A.RIGHT&&E(!0,e),null===b||void 0===b||b(e)},onClick:function(e){var a=E(!N,e);null===j||void 0===j||j(a,e)}}),g,o.createElement("span",{className:"".concat(s,"-inner")},N?f:A))}));h.displayName="Switch";const p=h;var x=n(35296),g=n(78440),f=n(87063),A=n(16021),j=function(e,a){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(t=Object.getOwnPropertySymbols(e);i<t.length;i++)a.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(n[t[i]]=e[t[i]])}return n},v=o.forwardRef((function(e,a){var n,l=e.prefixCls,c=e.size,d=e.disabled,m=e.loading,u=e.className,h=void 0===u?"":u,v=j(e,["prefixCls","size","disabled","loading","className"]),b=o.useContext(x.QO),y=b.getPrefixCls,C=b.direction,w=o.useContext(f.A),N=o.useContext(g.A),k=d||N||m,E=y("switch",l),D=o.createElement("div",{className:"".concat(E,"-handle")},m&&o.createElement(s.A,{className:"".concat(E,"-loading-icon")})),I=r()((n={},(0,i.A)(n,"".concat(E,"-small"),"small"===(c||w)),(0,i.A)(n,"".concat(E,"-loading"),m),(0,i.A)(n,"".concat(E,"-rtl"),"rtl"===C),n),h);return o.createElement(A.A,{insertExtraNode:!0},o.createElement(p,(0,t.A)({},v,{prefixCls:E,className:I,disabled:k,ref:a,loadingIcon:D})))}));v.__ANT_SWITCH=!0;const b=v}}]);
//# sourceMappingURL=4634.b73c58a7.chunk.js.map