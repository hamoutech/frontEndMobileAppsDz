"use strict";(self.webpackChunkMobileApps=self.webpackChunkMobileApps||[]).push([[7333],{97333:(e,a,t)=>{t.r(a),t.d(a,{default:()=>C});var i=t(65043),s=t(44662),d=t(94406),n=t(50289),l=t(48193),m=t(64435),c=t(89421),r=t(8572),u=t(73216),o=t(83003),p=t(74117),x=(t(44978),t(33307)),h=t(47419),A=t(11645),j=t(77962),f=t(3428),g=t(33122),y=t(94733),b=(t(80352),t(56860),t(1196),t(70579));const{TextArea:S}=x.A,N=e=>{const{stadium:a}=(0,o.d4)((e=>e.stadium)),{mode:t}=e,{t:s}=(0,p.Bd)(),[d,l]=((0,o.wA)(),(0,i.useState)([])),[m,r]=(0,i.useState)([]),[u,N]=(0,i.useState)(!1),w={onRemove:e=>{const a=d.indexOf(e),t=d.slice();t.splice(a,1),l(t)},beforeUpload:e=>(l([...d,e]),!1),fileList:d};return(0,b.jsx)("div",{children:(0,b.jsx)(h.A,{gutter:16,align:"middle",children:(0,b.jsx)(A.A,{xs:24,sm:24,md:24,children:(0,b.jsxs)(j.A,{children:[(0,b.jsxs)(h.A,{gutter:16,children:[(0,b.jsx)(A.A,{xs:24,sm:24,md:12,children:(0,b.jsx)(n.A.Item,{name:"stadiumName",label:s("Stadium name"),rules:[{required:!0,message:s("Required stadiumName")}],children:(0,b.jsx)(x.A,{})})}),(0,b.jsx)(A.A,{xs:24,sm:24,md:12,children:(0,b.jsx)(n.A.Item,{name:"location",label:s("Location"),children:(0,b.jsx)(x.A,{})})}),(0,b.jsx)(A.A,{xs:24,sm:24,md:12,children:(0,b.jsx)(n.A.Item,{name:"stadiumCapacity",label:s("Capacity"),rules:[{required:"true",message:"Required capacity"}],children:(0,b.jsx)(f.A,{style:{width:"100%"}})})}),(0,b.jsx)(A.A,{xs:24,sm:24,md:12,children:(0,b.jsx)(n.A.Item,{name:"stadiumLawn",label:s("GPS location"),children:(0,b.jsx)(x.A,{})})}),(0,b.jsx)(A.A,{xs:24,sm:24,md:12,children:(0,b.jsx)(n.A.Item,{name:"totalSurface",label:s("Total area"),children:(0,b.jsx)(f.A,{style:{width:"100%"}})})})]}),(0,b.jsx)(n.A.Item,{initialValue:m,label:s("Stadium image"),name:"stadiumImage",valuePropName:"fileList",getValueFromEvent:e=>e.fileList,children:(0,b.jsx)(g.A,{listType:"picture",name:"image",accept:"image/*",maxCount:1,...w,className:"custom-upload",children:(0,b.jsx)(c.A,{icon:(0,b.jsx)(y.A,{}),children:s("Add an image")})})}),(0,b.jsx)(n.A.Item,{label:s("Description"),name:"description",rules:[{required:"true",message:s("Required description")},{min:80,message:s("Description must be at least 80 characters")}],children:(0,b.jsx)(S,{rows:4})})]})})})})};var w=t(6706),I=t(53018);const{Option:F}=d.A,v="ADD",C=e=>{const{mode:a=v}=e,t=(0,u.Zp)(),d=(0,o.wA)(),{t:x}=(0,p.Bd)(),[h]=n.A.useForm(),[A,j]=(0,i.useState)(!1),[f,g]=(0,i.useState)(!1),{id:y}=(0,u.g)(),{error:S,stadium:F,loading:C}=(0,o.d4)((e=>e.stadium));(0,i.useEffect)((()=>{(async()=>{try{d((0,I.ON)())}catch(S){console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es du stade",S)}})()}),[d]),(0,i.useEffect)((()=>{if(F&&F[0]){const e=[{uid:"-1",name:F[0].stadiumImage[0].originalname,status:"done",url:"".concat(w.Y+F[0].stadiumImage[0].filename)}];h.setFieldsValue({stadiumName:F[0].stadiumName,location:F[0].location,stadiumCapacity:F[0].stadiumCapacity,stadiumLawn:F[0].gps,stadiumFieldSize:F[0].stadiumFieldSize,architect:F[0].architect,totalSurface:F[0].totalSurface,builder:F[0].builder,tenant:F[0].tenant,description:F[0].description,stadiumImage:e})}}),[F,h]);const[D,L]=(0,i.useState)(null);return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(n.A,{layout:"vertical",form:h,onFinish:async e=>{try{const e=await h.validateFields(),a=new FormData;a.append("location",e.location),a.append("stadiumName",e.stadiumName),a.append("stadiumCapacity",e.stadiumCapacity),a.append("gps",e.stadiumLawn),a.append("stadiumFieldSize",e.stadiumFieldSize),a.append("architect",e.architect),a.append("totalSurface",e.totalSurface),a.append("builder",e.builder),a.append("tenant",e.tenant),a.append("description",e.description),e.stadiumImage&&e.stadiumImage[0]&&a.append("stadiumImage",e.stadiumImage[0].originFileObj),0===F.length?(await d((0,I.Yr)(a)),l.Ay.success(x("Stadium added successfully!"),5)):(await d((0,I.lZ)({updatedStadiumData:a})),l.Ay.success(x("Stadium updated successfully!"),5))}catch(S){}finally{d((0,I.RZ)())}},name:"stadium-form",className:"ant-advanced-search-form",initialValues:D,children:[(0,b.jsx)(s.A,{className:"border-bottom mb-4",children:(0,b.jsx)("div",{className:"container",children:(0,b.jsx)(r.A,{mobileFlex:!1,justifyContent:"between",alignItems:"center",children:(0,b.jsx)("div",{children:(0,b.jsx)("h2",{className:"mb-3",style:{display:"inline-block"},children:x("ADD"===a?"Stadium info":"stadium.modifyStadium.title")})})})})}),(0,b.jsx)("div",{className:"container",children:(0,b.jsx)(N,{uploadLoading:A,mode:a})}),(0,b.jsx)(r.A,{justifyContent:"center",children:(0,b.jsxs)(m.A,{size:"middle",className:"mb-3",children:[(0,b.jsx)(c.A,{type:"primary",htmlType:"submit",children:x("ADD"===a?"actualite.addNews.addButton":"actualite.modifyNews.modifyButton")}),(0,b.jsx)(c.A,{className:"mr-2",onClick:()=>{t(-1)},children:x("actualite.addNews.cancelButton")})]})})]})})}}}]);
//# sourceMappingURL=7333.c8366ca6.chunk.js.map