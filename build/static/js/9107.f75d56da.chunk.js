"use strict";(self.webpackChunkMobileApps=self.webpackChunkMobileApps||[]).push([[9107,465,194],{44662:(e,a,t)=>{t.d(a,{A:()=>l});var n=t(65043),s=t(83003),i=t(79951),r=t(70579);const l=(0,s.Ng)((e=>{let{theme:a}=e;const{navType:t}=a;return{navType:t}}),{})((e=>{let{children:a,background:t,className:s,overlap:l,navType:d}=e;const[c,o]=(0,n.useState)(0),m=(0,n.useRef)(null);(0,n.useEffect)((()=>{if(d===i.HG){const e=window.innerWidth,a=m.current.offsetWidth;o((e-a)/2)}}),[d]);return(0,r.jsx)("div",{ref:m,className:"page-header-alt ".concat(s||""," ").concat(l&&"overlap"),style:(()=>{let e={backgroundImage:t?"url(".concat(t,")"):"none"};return d===i.HG&&(e.marginRight=-c,e.marginLeft=-c,e.paddingLeft=0,e.paddingRight=0),e})(),children:d===i.HG?(0,r.jsx)("div",{className:"container",children:a}):(0,r.jsx)(r.Fragment,{children:a})})}))},8572:(e,a,t)=>{t.d(a,{A:()=>i});t(65043);var n=t(70579);const s=e=>{const{children:a,className:t,alignItems:s,justifyContent:i,mobileFlex:r,flexDirection:l}=e;return(0,n.jsx)("div",{className:"".concat(r?"d-flex":"d-md-flex"," ").concat(t," ").concat(l?"flex-"+l:""," ").concat(s?"align-items-"+s:""," ").concat(i?"justify-content-"+i:""),children:a})};s.defaultProps={mobileFlex:!0,flexDirection:"row",className:""};const i=s},6706:(e,a,t)=>{t.d(a,{Y:()=>n});const n="https://backend.mobile-apps-dz.com/uploads/images/"},19107:(e,a,t)=>{t.r(a),t.d(a,{default:()=>l});t(65043);var n=t(73216),s=t(50194),i=t(40465),r=t(70579);const l=()=>(0,r.jsxs)(n.BV,{children:[(0,r.jsx)(n.qh,{path:"*",element:(0,r.jsx)(n.C5,{to:"liste",replace:!0})}),(0,r.jsx)(n.qh,{path:"edit/:id",element:(0,r.jsx)(s.default,{})}),(0,r.jsx)(n.qh,{path:"ajouter",element:(0,r.jsx)(i.default,{})})]})},40465:(e,a,t)=>{t.r(a),t.d(a,{default:()=>i});t(65043);var n=t(91904),s=t(70579);const i=()=>(0,s.jsx)(n.A,{mode:"ADD"})},50194:(e,a,t)=>{t.r(a),t.d(a,{default:()=>i});t(65043);var n=t(91904),s=t(70579);const i=()=>(0,s.jsx)(n.A,{mode:"EDIT"})},91904:(e,a,t)=>{t.d(a,{A:()=>k});var n=t(65043),s=t(44662),i=t(94406),r=t(50289),l=t(48193),d=t(64435),c=t(89421),o=t(8572),m=t(73216),u=t(83003),p=t(74117),h=t(44978),g=t(33307),x=t(33122),j=t(47419),A=t(11645),f=t(94733);const b={companyName:[{required:!0,message:(0,h.t)("the company name is required")}],RC:[{required:!0,message:(0,h.t)("the RC is required")}],description:[{required:!0,message:(0,h.t)("the description is required")}],image:[{required:!0,message:(0,h.t)("the image is required")}],phoneNumber:[{required:!0,message:(0,h.t)("the phone number is required")}],email:[{required:!0,message:(0,h.t)("the email is required")}]};var y=t(77977),v=t(58345),N=t.n(v),C=t(70579);const{TextArea:w}=g.A,{Dragger:D}=x.A,q=e=>{const{mode:a}=e,{t:t}=(0,p.Bd)(),[s,i]=((0,u.wA)(),(0,n.useState)([])),[l,d]=(0,n.useState)(!1),o={onRemove:e=>{const a=s.indexOf(e),t=s.slice();t.splice(a,1),i(t)},beforeUpload:e=>(i([...s,e]),!1),fileList:s},[m,h]=(0,n.useState)(""),{partner:v}=(0,u.d4)((e=>e.partner));return(0,n.useEffect)((()=>{"EDIT"===a&&v&&h(v.description||"")}),[a,v]),(0,C.jsx)("div",{children:(0,C.jsx)(j.A,{gutter:16,align:"middle",children:(0,C.jsxs)(A.A,{xs:24,sm:24,md:24,children:[(0,C.jsx)(j.A,{gutter:16,children:(0,C.jsx)(A.A,{xs:24,sm:24,md:24,children:(0,C.jsx)(r.A.Item,{name:"companyName",label:t("company name"),rules:b.articleName,children:(0,C.jsx)(g.A,{})})})}),(0,C.jsx)(r.A.Item,{label:t("image"),name:"image",rules:b.image,valuePropName:"fileList",getValueFromEvent:e=>e.fileList,children:(0,C.jsx)(x.A,{accept:"image/*",maxCount:1,listType:"picture",...o,className:"custom-upload",children:(0,C.jsx)(c.A,{icon:(0,C.jsx)(f.A,{}),children:t("Add an image")})})}),(0,C.jsx)(r.A.Item,{name:"phoneNumber",label:t("phone number"),rules:b.phoneNumber,children:(0,C.jsx)(g.A,{})}),(0,C.jsx)(r.A.Item,{name:"email",label:t("email"),rules:b.email,children:(0,C.jsx)(g.A,{})}),(0,C.jsx)(r.A.Item,{name:"RC",label:"RC",rules:b.RC,children:(0,C.jsx)(g.A,{})}),(0,C.jsx)(r.A.Item,{label:"Description",name:"description",rules:b.description,children:(0,C.jsx)(y.CKEditor,{editor:N(),data:m,onChange:(a,t)=>{const n=t.getData();h(n),e.onEditorChange&&e.onEditorChange(n)},onReady:e=>{e.editing.view.change((a=>{a.setStyle("min-height","200px",e.editing.view.document.getRoot())}))},config:{language:"fr",direction:"ltr"}})})]})})})};var E=t(92580),F=t(6706);const{Option:R}=i.A,I="ADD",S="EDIT",k=e=>{const{mode:a=I}=e,t=(0,m.Zp)(),i=(0,u.wA)(),{t:h}=(0,p.Bd)(),[g]=r.A.useForm(),[x,j]=(0,n.useState)(""),[A,f]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),{id:v}=(0,m.g)(),[N,w]=(0,n.useState)(null),{error:D,partner:R,loading:k}=(0,u.d4)((e=>e.partner));(0,n.useEffect)((()=>{a===S&&i((0,E.ZS)(v))}),[i,a,v]),(0,n.useEffect)((()=>{if(a===S&&R){const e={...R};if(g.setFieldsValue(e),R&&R.image){const e=[{uid:"-1",name:R.image[0].originalname,status:"done",url:"".concat(F.Y+R.image[0].filename)}];g.setFieldsValue({image:e})}}}),[g,a,R]);const[T,L]=(0,n.useState)("");return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(r.A,{layout:"vertical",form:g,onFinish:async()=>{try{const e=await g.validateFields(),n=new FormData;n.append("companyName",e.companyName),n.append("RC",e.RC),n.append("description",T),n.append("phoneNumber",e.phoneNumber),n.append("email",e.email),e.image&&e.image[0]&&n.append("image",e.image[0].originFileObj),a===I&&(await i((0,E.Fo)(n)).unwrap(),l.Ay.success(h("Partner added successfully!"),1),t(-1)),a===S&&(await i((0,E.AO)({id:R._id,data:n})).unwrap(),await l.Ay.success(h("Partner updated!"),1),t(-1))}catch(D){l.Ay.error(D)}finally{i((0,E.RZ)())}},name:"Nanny-form",className:"ant-advanced-search-form",initialValues:N,children:[(0,C.jsx)(s.A,{className:"border-bottom mb-4",children:(0,C.jsx)("div",{className:"container",children:(0,C.jsx)(o.A,{mobileFlex:!1,justifyContent:"between",alignItems:"center",children:(0,C.jsx)("div",{children:(0,C.jsx)("h2",{className:"mb-3",style:{display:"inline-block"},children:h("ADD"===a?"Add a partner":"Edit partner")})})})})}),(0,C.jsx)("div",{className:"container",children:(0,C.jsx)(q,{mode:a,onEditorChange:e=>{L(e)}})}),(0,C.jsx)(o.A,{justifyContent:"center",children:(0,C.jsxs)(d.A,{size:"middle",className:"mb-3",children:[(0,C.jsx)(c.A,{type:"primary",htmlType:"submit",children:h("ADD"===a?"Add a partner":"Edit partner")}),(0,C.jsx)(c.A,{className:"mr-2",onClick:()=>{t(-1)},children:h("cancel")})]})})]})})}}}]);
//# sourceMappingURL=9107.f75d56da.chunk.js.map