"use strict";(self.webpackChunkMobileApps=self.webpackChunkMobileApps||[]).push([[465],{44662:(e,a,n)=>{n.d(a,{A:()=>l});var t=n(65043),i=n(83003),s=n(79951),r=n(70579);const l=(0,i.Ng)((e=>{let{theme:a}=e;const{navType:n}=a;return{navType:n}}),{})((e=>{let{children:a,background:n,className:i,overlap:l,navType:c}=e;const[d,m]=(0,t.useState)(0),o=(0,t.useRef)(null);(0,t.useEffect)((()=>{if(c===s.HG){const e=window.innerWidth,a=o.current.offsetWidth;m((e-a)/2)}}),[c]);return(0,r.jsx)("div",{ref:o,className:"page-header-alt ".concat(i||""," ").concat(l&&"overlap"),style:(()=>{let e={backgroundImage:n?"url(".concat(n,")"):"none"};return c===s.HG&&(e.marginRight=-d,e.marginLeft=-d,e.paddingLeft=0,e.paddingRight=0),e})(),children:c===s.HG?(0,r.jsx)("div",{className:"container",children:a}):(0,r.jsx)(r.Fragment,{children:a})})}))},8572:(e,a,n)=>{n.d(a,{A:()=>s});n(65043);var t=n(70579);const i=e=>{const{children:a,className:n,alignItems:i,justifyContent:s,mobileFlex:r,flexDirection:l}=e;return(0,t.jsx)("div",{className:"".concat(r?"d-flex":"d-md-flex"," ").concat(n," ").concat(l?"flex-"+l:""," ").concat(i?"align-items-"+i:""," ").concat(s?"justify-content-"+s:""),children:a})};i.defaultProps={mobileFlex:!0,flexDirection:"row",className:""};const s=i},6706:(e,a,n)=>{n.d(a,{Y:()=>t});const t="https://backend.mobile-apps-dz.com/uploads/images/"},40465:(e,a,n)=>{n.r(a),n.d(a,{default:()=>s});n(65043);var t=n(91904),i=n(70579);const s=()=>(0,i.jsx)(t.A,{mode:"ADD"})},91904:(e,a,n)=>{n.d(a,{A:()=>k});var t=n(65043),i=n(44662),s=n(94406),r=n(50289),l=n(48193),c=n(64435),d=n(89421),m=n(8572),o=n(73216),u=n(83003),p=n(74117),h=n(44978),g=n(33307),x=n(33122),A=n(47419),f=n(11645),j=n(94733);const b={companyName:[{required:!0,message:(0,h.t)("the company name is required")}],RC:[{required:!0,message:(0,h.t)("the RC is required")}],description:[{required:!0,message:(0,h.t)("the description is required")}],image:[{required:!0,message:(0,h.t)("the image is required")}],phoneNumber:[{required:!0,message:(0,h.t)("the phone number is required")}],email:[{required:!0,message:(0,h.t)("the email is required")}]};var y=n(77977),N=n(58345),v=n.n(N),C=n(70579);const{TextArea:w}=g.A,{Dragger:D}=x.A,F=e=>{const{mode:a}=e,{t:n}=(0,p.Bd)(),[i,s]=((0,u.wA)(),(0,t.useState)([])),[l,c]=(0,t.useState)(!1),m={onRemove:e=>{const a=i.indexOf(e),n=i.slice();n.splice(a,1),s(n)},beforeUpload:e=>(s([...i,e]),!1),fileList:i},[o,h]=(0,t.useState)(""),{partner:N}=(0,u.d4)((e=>e.partner));return(0,t.useEffect)((()=>{"EDIT"===a&&N&&h(N.description||"")}),[a,N]),(0,C.jsx)("div",{children:(0,C.jsx)(A.A,{gutter:16,align:"middle",children:(0,C.jsxs)(f.A,{xs:24,sm:24,md:24,children:[(0,C.jsx)(A.A,{gutter:16,children:(0,C.jsx)(f.A,{xs:24,sm:24,md:24,children:(0,C.jsx)(r.A.Item,{name:"companyName",label:n("company name"),rules:b.articleName,children:(0,C.jsx)(g.A,{})})})}),(0,C.jsx)(r.A.Item,{label:n("image"),name:"image",rules:b.image,valuePropName:"fileList",getValueFromEvent:e=>e.fileList,children:(0,C.jsx)(x.A,{accept:"image/*",maxCount:1,listType:"picture",...m,className:"custom-upload",children:(0,C.jsx)(d.A,{icon:(0,C.jsx)(j.A,{}),children:n("Add an image")})})}),(0,C.jsx)(r.A.Item,{name:"phoneNumber",label:n("phone number"),rules:b.phoneNumber,children:(0,C.jsx)(g.A,{})}),(0,C.jsx)(r.A.Item,{name:"email",label:n("email"),rules:b.email,children:(0,C.jsx)(g.A,{})}),(0,C.jsx)(r.A.Item,{name:"RC",label:"RC",rules:b.RC,children:(0,C.jsx)(g.A,{})}),(0,C.jsx)(r.A.Item,{label:"Description",name:"description",rules:b.description,children:(0,C.jsx)(y.CKEditor,{editor:v(),data:o,onChange:(a,n)=>{const t=n.getData();h(t),e.onEditorChange&&e.onEditorChange(t)},onReady:e=>{e.editing.view.change((a=>{a.setStyle("min-height","200px",e.editing.view.document.getRoot())}))},config:{language:"fr",direction:"ltr"}})})]})})})};var R=n(92580),E=n(6706);const{Option:q}=s.A,I="ADD",S="EDIT",k=e=>{const{mode:a=I}=e,n=(0,o.Zp)(),s=(0,u.wA)(),{t:h}=(0,p.Bd)(),[g]=r.A.useForm(),[x,A]=(0,t.useState)(""),[f,j]=(0,t.useState)(!1),[b,y]=(0,t.useState)(!1),{id:N}=(0,o.g)(),[v,w]=(0,t.useState)(null),{error:D,partner:q,loading:k}=(0,u.d4)((e=>e.partner));(0,t.useEffect)((()=>{a===S&&s((0,R.ZS)(N))}),[s,a,N]),(0,t.useEffect)((()=>{if(a===S&&q){const e={...q};if(g.setFieldsValue(e),q&&q.image){const e=[{uid:"-1",name:q.image[0].originalname,status:"done",url:"".concat(E.Y+q.image[0].filename)}];g.setFieldsValue({image:e})}}}),[g,a,q]);const[T,L]=(0,t.useState)("");return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(r.A,{layout:"vertical",form:g,onFinish:async()=>{try{const e=await g.validateFields(),t=new FormData;t.append("companyName",e.companyName),t.append("RC",e.RC),t.append("description",T),t.append("phoneNumber",e.phoneNumber),t.append("email",e.email),e.image&&e.image[0]&&t.append("image",e.image[0].originFileObj),a===I&&(await s((0,R.Fo)(t)).unwrap(),l.Ay.success(h("Partner added successfully!"),1),n(-1)),a===S&&(await s((0,R.AO)({id:q._id,data:t})).unwrap(),await l.Ay.success(h("Partner updated!"),1),n(-1))}catch(D){l.Ay.error(D)}finally{s((0,R.RZ)())}},name:"Nanny-form",className:"ant-advanced-search-form",initialValues:v,children:[(0,C.jsx)(i.A,{className:"border-bottom mb-4",children:(0,C.jsx)("div",{className:"container",children:(0,C.jsx)(m.A,{mobileFlex:!1,justifyContent:"between",alignItems:"center",children:(0,C.jsx)("div",{children:(0,C.jsx)("h2",{className:"mb-3",style:{display:"inline-block"},children:h("ADD"===a?"Add a partner":"Edit partner")})})})})}),(0,C.jsx)("div",{className:"container",children:(0,C.jsx)(F,{mode:a,onEditorChange:e=>{L(e)}})}),(0,C.jsx)(m.A,{justifyContent:"center",children:(0,C.jsxs)(c.A,{size:"middle",className:"mb-3",children:[(0,C.jsx)(d.A,{type:"primary",htmlType:"submit",children:h("ADD"===a?"Add a partner":"Edit partner")}),(0,C.jsx)(d.A,{className:"mr-2",onClick:()=>{n(-1)},children:h("cancel")})]})})]})})}}}]);
//# sourceMappingURL=465.549624aa.chunk.js.map